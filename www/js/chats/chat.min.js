function chat_init(){chat_active=$("#chat_active"),chat_input=$("#chat_input"),chat_button_send=$("#chat_button_send"),chat_messages=$("#chat_messages"),page_chat=chat_messages.parents(".page_chat"),interlocutor_status=$("#interlocutor_status"),chat_input.on("change keyup input click",function(){chat_input.val().length>0?chat_button_send.addClass("_active_"):chat_button_send.removeClass("_active_"),chat_input.val().length>10?chat_active.addClass("_full_height_"):chat_active.removeClass("_full_height_")}),chat_input.focusout(function(){chat_active.removeClass("_full_height_")}),chat_button_send.on("click",function(){chat_send()}),chat_input.on("keypress",function(t){t.ctrlKey&&13==t.keyCode&&(chat_send(),console.log("send"))}),scroll_to(0,chat_messages[0].scrollHeight)}function chat_text_clean(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}function chat_send(){return chat_input.val().length>0&&(chat_messages.append('<div class="message">'+chat_text_clean(chat_input.val())+"</div>"),chat_input.val(""),chat_button_send.removeClass("_active_"),scroll_to(0,chat_messages[0].scrollHeight),chat_bot()),!1}function chat_bot(t){var e=[],a=Math.floor(2e3*Math.random()+500);interlocutor_input=Math.floor(3e3*Math.random()+1e3),interlocutor_out=Math.floor(8e3*Math.random()+1e3),interlocutor_online=Math.floor(5e3*Math.random()+1e3),e.push(":("),e.push("Хех"),e.push("А я тебе про что?)"),e.push("Я подумаю"),e.push("Я тебя поняла."),e.push("Ага, понятно..."),e.push(":D"),e.push("А ещё чего?"),e.push("Не ну это не смешно.."),e.push("Не сегодня"),e.push("Давай завтра"),e.push("..."),e.push("Напиши чего по лучше"),e.push("Ну ты даёшь"),e.push("Ну да, ну да"),e.push("Без тебя справлюсь!"),e.push("Отстань."),e.push("Я не хочу тебе писать"),e.push("):"),chat_bot_timer=setTimeout(function(){interlocutor_status.html("в сети"),setTimeout(function(){interlocutor_status.html("набирает сообщение..."),setTimeout(function(){chat_messages.append('<div class="message __interlocutor">'+e[Math.floor(18*Math.random())]+"</div>"),interlocutor_status.html("в сети"),scroll_to(0,chat_messages[0].scrollHeight),setTimeout(function(){interlocutor_status.html("не в сети")},interlocutor_out)},a)},interlocutor_input)},interlocutor_online)}